# ğŸ—ï¸ System Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IoT ROOM ACCESS CONTROL SYSTEM               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React)                              â”‚
â”‚                      Runs on: localhost:5173                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Navigation Bar                             â”‚  â”‚
â”‚  â”‚  [ğŸ“Š Dashboard]  [ğŸ” Room Access]                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Dashboard Page                              â”‚  â”‚
â”‚  â”‚  â€¢ System Overview                                            â”‚  â”‚
â”‚  â”‚  â€¢ KPI Cards (real-time metrics)                             â”‚  â”‚
â”‚  â”‚  â€¢ Map Visualization                                         â”‚  â”‚
â”‚  â”‚  â€¢ Analytics Charts                                          â”‚  â”‚
â”‚  â”‚  â€¢ Alert Ticker                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Room Access Management Page                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Left Panel  â”‚  â”‚ Center Panel â”‚  â”‚ Right Panel  â”‚         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Rooms List â”‚  â”‚ â€¢ Room Info  â”‚  â”‚ â€¢ User List  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ New Room   â”‚  â”‚ â€¢ Access Ctl â”‚  â”‚ â€¢ New User   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ + Form       â”‚  â”‚ â€¢ Logs/Audit â”‚  â”‚ + Form       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ â€¢ Grant/Revk â”‚  â”‚              â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Toast Notification System                        â”‚  â”‚
â”‚  â”‚  Bottom-Right Corner (auto-dismiss)                           â”‚  â”‚
â”‚  â”‚  âœ“ Success | âœ• Error | âš  Warning | â„¹ Info                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â”‚ HTTP Requests       â”‚ API Calls          â”‚ WebSocket
        â”‚ JSON Responses      â”‚ CRUD Ops           â”‚ (Optional)
        â”‚ fetch() API         â”‚ RESTful            â”‚
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (Flask + Python)                         â”‚
â”‚                      Runs on: localhost:5000                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Flask REST API Server (app.py)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ Users Routes â”‚  â”‚ Rooms Routes â”‚  â”‚ Access Routesâ”‚         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚  â”‚
â”‚  â”‚  â”‚ GET /users   â”‚  â”‚ GET /rooms   â”‚  â”‚ POST /grant  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ POST /users  â”‚  â”‚ POST /rooms  â”‚  â”‚ POST /revoke â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ GET /users/* â”‚  â”‚ GET /rooms/* â”‚  â”‚ POST /check  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ GET /access  â”‚  â”‚ GET /logs    â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  MQTT Notification Routes                        â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  GET /notifications - Get recent messages        â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  GET /notifications/latest - Latest message      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  POST /notifications/clear - Clear all           â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                   â”‚                   â”‚             â”‚
â”‚                 â–¼                   â–¼                   â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Database.py    â”‚  â”‚ MQTT_Client.py   â”‚  â”‚   Config.py      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ Users Data     â”‚  â”‚ â€¢ MQTT Connectionâ”‚  â”‚ â€¢ Env Loading    â”‚   â”‚
â”‚  â”‚ â€¢ Rooms Data     â”‚  â”‚ â€¢ Message Handlerâ”‚  â”‚ â€¢ Broker Config  â”‚   â”‚
â”‚  â”‚ â€¢ Access Control â”‚  â”‚ â€¢ Topic Sub      â”‚  â”‚ â€¢ API Config     â”‚   â”‚
â”‚  â”‚ â€¢ Activity Logs  â”‚  â”‚ â€¢ Threading      â”‚  â”‚ â€¢ CORS Settings  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â”‚ In-Memory                                 â”‚ MQTT Broker
        â”‚ Sample Data                               â”‚ Communication
        â”‚ (Users, Rooms,                            â”‚
        â”‚  Access Control,                          â”‚
        â”‚  Activity Logs)                           â”‚
        â”‚                                           â”‚
        â–¼                                           â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              External Services / Data                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   MQTT Broker              â”‚    â”‚   IoT Devices              â”‚   â”‚
â”‚  â”‚ (broker.mqttdashboard.com) â”‚    â”‚ (Sends room entry msgs)    â”‚   â”‚
â”‚  â”‚                            â”‚    â”‚                            â”‚   â”‚
â”‚  â”‚ Topics:                    â”‚    â”‚ Publishes to:              â”‚   â”‚
â”‚  â”‚ â€¢ /iot/room/enter          â”‚â—„â”€â”€â–ºâ”‚ â€¢ /iot/room/enter          â”‚   â”‚
â”‚  â”‚ â€¢ /iot/room/exit           â”‚    â”‚ â€¢ /iot/room/exit           â”‚   â”‚
â”‚  â”‚                            â”‚    â”‚                            â”‚   â”‚
â”‚  â”‚ Format:                    â”‚    â”‚ Format:                    â”‚   â”‚
â”‚  â”‚ {"subject":"User123"}      â”‚    â”‚ {"subject":"Device001"}    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagrams

### Grant Room Access Flow

```
User Interface                Backend API              Database
     â”‚                            â”‚                        â”‚
     â”‚ 1. Click "Grant" Button    â”‚                        â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
     â”‚                            â”‚ 2. POST /access/grant  â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                            â”‚ 3. Verify user & room  â”‚
     â”‚                            â”‚    Add to access list  â”‚
     â”‚                            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ 4. Return success response â”‚                        â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
     â”‚                            â”‚ 5. Log action          â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚ 6. Show success toast      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ 7. Update UI               â”‚                        â”‚
     â”‚ 8. Refresh access list     â”‚                        â”‚
     â”‚                            â”‚                        â”‚
```

### MQTT Room Entry Notification Flow

```
IoT Device              MQTT Broker           Backend Server            Frontend
    â”‚                        â”‚                      â”‚                      â”‚
    â”‚ 1. User enters room    â”‚                      â”‚                      â”‚
    â”œâ”€ Publish message      â”‚                      â”‚                      â”‚
    â”‚ /iot/room/enter       â”‚                      â”‚                      â”‚
    â”‚ {"subject":"User123"} â”‚                      â”‚                      â”‚
    â”‚                       â”‚                      â”‚                      â”‚
    â”‚                       â”‚ 2. Topic message    â”‚                      â”‚
    â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                      â”‚
    â”‚                       â”‚                    â”‚ 3. Parse & Log       â”‚
    â”‚                       â”‚                    â”‚ 4. Add to notification queue
    â”‚                       â”‚                    â”‚                      â”‚
    â”‚                       â”‚                    â”‚ 5. Poll notifications (2s)
    â”‚                       â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                       â”‚                    â”‚ GET /notifications   â”‚
    â”‚                       â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                       â”‚                    â”‚ 6. Show as toast     â”‚
    â”‚                       â”‚                    â”‚    "Room Entry:      â”‚
    â”‚                       â”‚                    â”‚     User123"         â”‚
    â”‚                       â”‚                    â”‚ 7. Auto-dismiss      â”‚
    â”‚                       â”‚                    â”‚                      â”‚
```

### Access Control Decision Flow

```
User Request
    â”‚
    â”œâ”€ Check user exists? â”€â”€NOâ”€â”€â–º Error: User not found
    â”‚
    â”œâ”€ Check room exists? â”€â”€NOâ”€â”€â–º Error: Room not found
    â”‚
    â”œâ”€ Grant (new user)?
    â”‚   â”‚
    â”‚   â”œâ”€ User already has access? â”€â”€YESâ”€â”€â–º Error: User already has access
    â”‚   â”‚
    â”‚   â””â”€ Add to access list â”€â”€â–º Log "grant" action â”€â”€â–º Return success
    â”‚
    â””â”€ Revoke (remove user)?
        â”‚
        â”œâ”€ User has access? â”€â”€NOâ”€â”€â–º Error: User does not have access
        â”‚
        â””â”€ Remove from access list â”€â”€â–º Log "revoke" action â”€â”€â–º Return success
```

## Component Architecture

### Frontend Components Hierarchy

```
App (Main)
â”œâ”€â”€ Navigation Bar
â”‚   â”œâ”€â”€ Brand Logo
â”‚   â””â”€â”€ Navigation Links
â”‚       â”œâ”€â”€ Dashboard Link
â”‚       â””â”€â”€ Room Access Link
â”‚
â”œâ”€â”€ Dashboard Page
â”‚   â”œâ”€â”€ Status Bar
â”‚   â”œâ”€â”€ Left Panel
â”‚   â”‚   â”œâ”€â”€ KPI Cards (x4)
â”‚   â”‚   â””â”€â”€ Stats Grid
â”‚   â”œâ”€â”€ Center Panel
â”‚   â”‚   â””â”€â”€ MapVisualization
â”‚   â”œâ”€â”€ Right Panel
â”‚   â”‚   â”œâ”€â”€ DonutChart
â”‚   â”‚   â””â”€â”€ BarChart
â”‚   â””â”€â”€ Alert Ticker
â”‚
â”œâ”€â”€ Room Access Page
â”‚   â”œâ”€â”€ RoomAccessManagement
â”‚   â”‚   â”œâ”€â”€ Left Panel
â”‚   â”‚   â”‚   â”œâ”€â”€ Room List
â”‚   â”‚   â”‚   â””â”€â”€ New Room Form
â”‚   â”‚   â”œâ”€â”€ Center Panel
â”‚   â”‚   â”‚   â”œâ”€â”€ Room Details
â”‚   â”‚   â”‚   â”œâ”€â”€ Tabs (Access Control / Logs)
â”‚   â”‚   â”‚   â”œâ”€â”€ Users With Access
â”‚   â”‚   â”‚   â””â”€â”€ Grant Access Interface
â”‚   â”‚   â””â”€â”€ Right Panel
â”‚   â”‚       â”œâ”€â”€ Users List
â”‚   â”‚       â””â”€â”€ New User Form
â”‚   â”‚
â”‚   â””â”€â”€ Toast Container
â”‚       â””â”€â”€ Toast (x multiple)
â”‚           â”œâ”€â”€ Success Toast
â”‚           â”œâ”€â”€ Error Toast
â”‚           â”œâ”€â”€ Warning Toast
â”‚           â””â”€â”€ Info Toast
â”‚
â””â”€â”€ Footer (optional)
```

## API Endpoint Organization

```
/api
â”œâ”€â”€ /health                          [GET]  System health check
â”‚
â”œâ”€â”€ /users                           [GET]  List all users
â”‚   â”œâ”€â”€ [POST]  Create new user
â”‚   â”œâ”€â”€ /{id}                        [GET]  Get user details
â”‚   â””â”€â”€ /{id}/rooms                  [GET]  Get user's rooms
â”‚
â”œâ”€â”€ /rooms                           [GET]  List all rooms
â”‚   â”œâ”€â”€ [POST]  Create new room
â”‚   â”œâ”€â”€ /{id}                        [GET]  Get room details
â”‚   â””â”€â”€ /{id}/access                 [GET]  Get room access list
â”‚
â”œâ”€â”€ /access
â”‚   â”œâ”€â”€ /grant                       [POST] Grant access
â”‚   â”œâ”€â”€ /revoke                      [POST] Revoke access
â”‚   â””â”€â”€ /check                       [POST] Check access
â”‚
â”œâ”€â”€ /logs
â”‚   â”œâ”€â”€ /access                      [GET]  Get all logs
â”‚   â””â”€â”€ /room/{id}                   [GET]  Get room-specific logs
â”‚
â””â”€â”€ /notifications
    â”œâ”€â”€ [GET]  Get recent notifications
    â”œâ”€â”€ /latest                      [GET]  Get latest notification
    â””â”€â”€ /clear                       [POST] Clear all notifications
```

## Technology Stack

```
FRONTEND
â”œâ”€â”€ React 19
â”œâ”€â”€ Tailwind CSS v4
â”œâ”€â”€ Vite (build tool)
â”œâ”€â”€ Fetch API (HTTP)
â””â”€â”€ Custom CSS (animations)

BACKEND
â”œâ”€â”€ Python 3.8+
â”œâ”€â”€ Flask 3.0
â”œâ”€â”€ Flask-CORS
â”œâ”€â”€ paho-mqtt 1.6
â”œâ”€â”€ python-dotenv
â””â”€â”€ Requests

DATABASE
â”œâ”€â”€ In-Memory (for demo)
â”œâ”€â”€ Sample Data (pre-populated)
â””â”€â”€ Extensible to PostgreSQL/MongoDB

MESSAGE BROKER
â”œâ”€â”€ MQTT Protocol
â”œâ”€â”€ Public Broker (test)
â””â”€â”€ Custom Broker Support

DEPLOYMENT
â”œâ”€â”€ Frontend: Vite dev server / Static hosting
â”œâ”€â”€ Backend: Flask dev server / Production WSGI
â”œâ”€â”€ Database: File-based or cloud DB
â””â”€â”€ Broker: Public or self-hosted MQTT
```

---

This architecture provides a scalable, modern approach to IoT room access control with real-time capabilities! ğŸš€
